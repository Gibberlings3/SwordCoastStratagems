<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>lib_class function library</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../../doc/files/g3readme_cam_022916_dwedit.css" type="text/css" />
<link href="../../doc/files/g3icon.ico" rel="icon" type="image/bmp" />
</head>
<body>
<div id="container">
<div class="ribbon_bubble">
    <div class="ribbon_rectangle">
<h1>lib_class function library</h1>
</div>
    <div class="ribbon_triangle-l"></div>
    <div class="ribbon_triangle-r"></div>

<div class="section">
<p><strong>Dependencies:</strong> alter_effect, ds, lib_2da, lib_2daq, lib_anon, lib_array, lib_cre, lib_data, lib_eff, lib_fn, lib_ids, lib_ietool, lib_ini, lib_kit, lib_script, lib_sfo, lib_spl, lib_splconv, lib_ssl, lib_struct, lib_sugar, lib_tools, lib_ui, lib_vtable, resolve_spell, ui_add_subraces, ui_bonus_spells, ui_deolvynize, ui_detect_class_kit, ui_dual_class_kits, ui_externalize_hlas, ui_externalize_proficiencies, ui_extra_spells, ui_on_open, ui_shared_code, ui_spell_system, ui_system_call, ui_virtual_class</p>
</div>

<div class="ribbon_rectangle_h2"><h2>Description</h2> </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>

<div class="section">
<p>Functions (based on the vtable system) for reading and writing class data into and out of a data structure (where it can be edited directly).</p>
</div>

<div class="ribbon_rectangle_h2"><h2>Public functions</h2> </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>

<div class="section">
<p><strong>class_edit(edit_strrefs_in_place:i, class:s, edits:s, struct:s=k)=()</strong> action<br></p><p>
Edit the class 'class' (or the list of classes 'class'). 'edits' is executed as an anonymous function, which first reads the class into struct 'struct' (default 'k') and then writes that struct back. ('k' so that the same patch can be used for kits and classes.)</p></p><p><p>If 'edit_strrefs_in_place' is set to 1, any strrefs have their values updated, rather than being
replaced with new strrefs (use this with caution).</p></p><p><p>(Arguably this is just an internal function: you can put unkitted classes into kit_edit and it just calls class_edit.)
</p>
<p><strong>class_read(class:s)=(struct:a)</strong> dimorphic<br></p><p>
Read a class into a struct. (A wrapper for vtable_read, with a bit of extra stuff to handle editing clabs.)
</p>
<p><strong>class_write(edit_strrefs_in_place:b, class:s, struct:s)=()</strong> dimorphic<br></p><p>
Write the contents of a struct into class 'class'. This includes setting the clab file and the race tables (which are controlled by the 'any_race' and 'human'/'dwarf' (etc) struct variables.
If 'edit_strrefs_in_place' is set to 1, any strrefs have their values updated, rather than being
replaced with new strrefs (use this with caution).</p></p><p><p>Note that (unlike for lib_struct functions) 'struct' needs to be an array, not just a set of values. (So intermediate functions need to return the whole array.)
</p>








</div>



</div>
</div>
</body>