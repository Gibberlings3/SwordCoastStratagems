<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>lib_immunity function library</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="../../doc/files/g3readme_cam_022916_dwedit.css" type="text/css" />
<link href="../../doc/files/g3icon.ico" rel="icon" type="image/bmp" />
</head>
<body>
<div id="container">
<div class="ribbon_bubble">
    <div class="ribbon_rectangle">
<h1>lib_immunity function library</h1>
</div>
    <div class="ribbon_triangle-l"></div>
    <div class="ribbon_triangle-r"></div>

<div class="section">
<p><strong>Dependencies:</strong> alter_effect, ds, lib_2da, lib_anon, lib_array, lib_fn, lib_ini, lib_sfo, lib_struct, lib_sugar, lib_tools, lib_ui</p>
</div>

<div class="ribbon_rectangle_h2"><h2>Description</h2> </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>

<div class="section">
<p>Functions here streamline applying immunity effects (to damage types, opcodes, etc) to spells, items and creatures, while managing the required secondary
immunities to graphics, strings, icons and the like.</p>
</div>

<div class="ribbon_rectangle_h2"><h2>Public functions</h2> </div>
    <div class="ribbon_triangle_h2-l"></div>
    <div class="ribbon_triangle_h2-r"></div>

<div class="section">
<p><strong>immunity_effect(permanent:i=1, arguments:s, struct:s)=(struct:a)</strong> dimorphic<br></p><p>
(This is a struct function).</p></p><p><p>Patches the spell/item/creature to offer immunity to a list of effects. If run in permanent mode (the default) it adds the effect outright
with timing=9 (2 for items). On a spell, this is added to all abilities; on an item or cre, to the base item/cre.
If run in non-permanent mode, everything is applied as a clone of the controlling immune-to-this opcode (if any).</p></p><p><p>The list of effects is: charm, stun, fear, hold, sleep, poison, diseased, energy_drain, blinded, insects
</p>
<p><strong>immunity_effects_load</strong> action_macro<br></p><p>
Defines the arrays for the immunity_effect function</p>
<p><strong>immunity_find_strings()=(immunity_string_array:a)</strong> action<br></p><p>
This function gets all the immunity strings - loading them from a premade file if it exists, creating that file
otherwise. The file is created with COPY + and so persists even when the component is uninstalled.</p><p>The 'create file' version only works in English. It shouldn't be run in distributed code.
Make sure it's run ahead of time (on each of BG2, SoD, IWD) to make the files.</p><p>Currently EE-only, though wouldn't be difficult to adapt.
</p>
<p><strong>immunity_spell(struct:s, arguments:s)=(struct:a)</strong> dimorphic<br></p><p>
Given a list of spell resrefs, grants (for an item or creature) while-equipped or permanent immunity.
On a spell, adds permanent (not just until-death) immunity to target=2 as an ability effect.
</p>



</div>
<div class="ribbon_rectangle_h2"><h2>Internal functions</h2> </div>
<div class="ribbon_triangle_h2-l"></div>
<div class="ribbon_triangle_h2-r"></div>
<div class="section">
<p>These should not be called from outside the library itself.</p>
<p><strong>immunity_spell_helper()=()</strong> patch<br></p>





</div>



</div>
</div>
</body>