
//////////////////////////////////////////////////////////////////////////////////////////
///	Ascension control block
//////////////////////////////////////////////////////////////////////////////////////////


INCLUDE FILE(%scsroot%/ascension/ssl/asc_control.ssl)


//////////////////////////////////////////////////////////////////////////////////////
///	Gate
//////////////////////////////////////////////////////////////////////////////////////


IF TRIGGER
	Allegiance(Myself,ENEMY)
	Delay(6)
	!GlobalTimerNotExpired("castspell","LOCALS")
	OR(2)
		NumCreatureLT([ENEMY.0.DEMONIC],3)
		NumCreatureVsPartyLT([ENEMY.0.DEMONIC],0)
	Global("gated","LOCALS",0)
	!Range(NearestEnemyOf(Myself),10)
	TriggerBlock(CorePlus)
THEN DO
                Action(Literal|100|100)
		SetGlobalTimer("castspell","LOCALS",6)
		SetGlobal("gated","LOCALS",1)
		ForceSpellRES("GATE4",Myself) // Gate
END

//////////////////////////////////////////////////////////////////////////////////////
///   Main script
//////////////////////////////////////////////////////////////////////////////////////

INCLUDE FILE(%scsroot%/fiend/ssl/demglab.ssl)