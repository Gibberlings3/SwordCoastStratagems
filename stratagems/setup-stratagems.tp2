BACKUP ~stratagems_external/backup/stratagems~
SUPPORT ~http://gibberlings3.net/forums/index.php?showforum=118~
VERSION ~v31~
README ~stratagems/readme-stratagems.html~
AUTO_EVAL_STRINGS

///---/// ASK_EVERY_COMPONENT

ALWAYS
  ACTION_IF GAME_IS ~eet~ BEGIN
    OUTER_SET bg2_chapter = 12
  END ELSE BEGIN
    OUTER_SET bg2_chapter = 0
  END
  OUTER_FOR (i=1; i<=10; i=i+1) BEGIN
    OUTER_SET bg2_chapter = bg2_chapter + 1
    OUTER_SPRINT name_source ~bg2_chapter_%i%~
    OUTER_SET EVAL ~%name_source%~ = bg2_chapter
  END

   OUTER_SET debug_variable=0
   OUTER_SPRINT scsroot stratagems
   OUTER_SPRINT workspace ~stratagems_external/workspace~

   ///---/// ACTION_IF 0 THEN BEGIN
   INCLUDE ~%scsroot%/lib/always.tph~
   ///---/// END ELSE BEGIN
   ///---///    INCLUDE ~%scsroot%/lib/install.tph~
   ///---/// END
   ///---///
END

////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////
////	Language commands
////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////

LANGUAGE
"English"
ENGLISH
 ~stratagems/tra/english/english.tra~
LANGUAGE
"Espanol (www.clandlan.net)"
SPANISH
 ~stratagems/tra/english/english.tra~
~stratagems/tra/spanish/spanish.tra~

LANGUAGE
"Polski (Yarpen)"
POLISH
 ~stratagems/tra/english/english.tra~
~stratagems/tra/polish/polish.tra~

LANGUAGE
"Deutsch (Leonardo Watson)"
GERMAN
 ~stratagems/tra/english/english.tra~
 ~stratagems/tra/german/german.tra~

LANGUAGE
"Francais (Mornagest/Isaya)"
FRENCH
 ~stratagems/tra/english/english.tra~
 ~stratagems/tra/french/french.tra~

 LANGUAGE
"Italiano (Stoneangel)"
ITALIAN
 ~stratagems/tra/english/english.tra~
 ~stratagems/tra/italian/italian.tra~

 LANGUAGE
"Russian (Prowler/Silent)"
RUSSIAN
 ~stratagems/tra/english/english.tra~
 ~stratagems/tra/russian/russian.tra~


 LANGUAGE
"Korean (Menocu)"
KOREAN
 ~stratagems/tra/english/english.tra~
 ~stratagems/tra/korean/korean.tra~

 LANGUAGE
"Simplified Chinese (c4_angel/www.trow.cc)"
SCHINESE
 ~stratagems/tra/english/english.tra~
 ~stratagems/tra/schinese/prompts/prompts-%WEIDU_OS%.tra~
 ~stratagems/tra/schinese/schinese.tra~

///////////////////////////////////////////////////////////////////
////////////////////////////////////
///	Test space
////////////////////////////////////////////////////////////////////
/////////////////////////////////////

// BEGIN test DESIGNATED 0


///////////////////////////////////////////////////////////////////
////////////////////////////////////
///	Initialisation component
////////////////////////////////////////////////////////////////////
/////////////////////////////////////

BEGIN @3393 DESIGNATED 1000 ///---/// INSTALL_BY_DEFAULT NO_LOG_RECORD
LAF make_label STR_VAR label=dw#setup END

OUTER_SPRINT ~component_loc~ ~initial~
LAF run STR_VAR files=initial END

////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////
///	Spell components
////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////

///////////////////////////////////////////
//  standardise BG1 spells
////////////////////////////////////////////

BEGIN @20074 DESIGNATED 1900  GROUP @2 SUBCOMPONENT @20076 (GAME_IS ~tutu tutu_totsc~) //Remove BG2-only spells

REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE (GAME_IS ~bgt tutu tutu_totsc~) @16001

LAF make_label STR_VAR label=dw#standardise_nobg2 END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=standardise_bg1_spells version=bg1 END

////////////////////////////////////////////

BEGIN @20077 DESIGNATED 1901 GROUP @2 SUBCOMPONENT @20076  //Add BG2 spells

LAF make_label STR_VAR label=dw#standardise_yesbg2 END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=standardise_bg1_spells version=bg2 END


///////////////////////////////////////////
//  pro/NM blocks fire arrows etc
////////////////////////////////////////////

BEGIN @16004 DESIGNATED 1910 GROUP @2
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !FILE_EXISTS ~override/dvimhere.mrk~ @3352

LAF make_label STR_VAR label=dw#pro_NM END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=pro_normal_missiles END

///////////////////////////////////////////
//  spellstrike takes down pro/magic scrolls
////////////////////////////////////////////

BEGIN @11 DESIGNATED 2000 GROUP @2
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !FILE_EXISTS ~override/dvimhere.mrk~ @3352
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#spellstrikevsPM END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=spellstrike_vs_pm_scroll END

///////////////////////////////////////////////////////////////////////////////
// Breach doesn't penetrate Spell Turning etc
///////////////////////////////////////////////////////////////////////////////

BEGIN @12 DESIGNATED 2010 GROUP @2
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8

LAF make_label STR_VAR label=dw#breach END


OUTER_SPRINT component_loc spell
LAF run STR_VAR files=modify_breach END

///////////////////////////////////////////////////////////////////////////////
// Antimagic attacks penetrate improved invisibility
///////////////////////////////////////////////////////////////////////////////

BEGIN @13 DESIGNATED 2020 GROUP @2
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8

LAF make_label STR_VAR label=dw#antimagicII END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=antimagic_penetrates_ii END


///////////////////////////////////////////////////////////////////////////////
// Iron Skins behaves like Stoneskin
///////////////////////////////////////////////////////////////////////////////

BEGIN @14 DESIGNATED 2030 GROUP @2
REQUIRE_PREDICATE !FILE_EXISTS_IN_GAME ~dvimhere.mrk~ @3352
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8

LAF make_label STR_VAR label=dw#ironskin END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=ironskins END

///////////////////////////////////////////////////////////////////////////////
// Harm does fixed damage
///////////////////////////////////////////////////////////////////////////////

BEGIN @15 DESIGNATED 2040 GROUP @2 SUBCOMPONENT @17 // only modify vs-enemies version

REQUIRE_PREDICATE !FILE_EXISTS_IN_GAME ~dvimhere.mrk~ @3352
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#harm1 END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=~harm~ version=enemies_unmodified END

//////////////////////////////////////////////////////////////////////

BEGIN @16 DESIGNATED 2041 GROUP @2 SUBCOMPONENT @17 // modify both versions

LAF make_label STR_VAR label=dw#harm2 END
OUTER_SET harm_modify_enemy_version=1

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=~harm~ version=enemies_modified END

///////////////////////////////////////////////////////////////////////////////
// Make individual versions of Spell Immunity available
///////////////////////////////////////////////////////////////////////////////

BEGIN @18 DESIGNATED 2050 GROUP @2
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !FILE_EXISTS ~tobex.dll~ @16045
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000


LAF make_label STR_VAR label=dw#spellimm END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=~spell_immunity~ END

///////////////////////////////////////////////////////////////////////////////
// Greater Restoration only affects one creature
///////////////////////////////////////////////////////////////////////////////

BEGIN @19 DESIGNATED 2060 GROUP @2
REQUIRE_PREDICATE !FILE_EXISTS_IN_GAME ~dvimhere.mrk~ @3352
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000
REQUIRE_PREDICATE !GAME_IS ~bg2ee eet~ @15999


LAF make_label STR_VAR label=dw#restoration END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=~nerf_greater_restoration~ END

///////////////////////////////////////////////////////////////////////////////
// Blade Barrier only affects hostiles
///////////////////////////////////////////////////////////////////////////////

BEGIN @20 DESIGNATED 2070 GROUP @2
REQUIRE_PREDICATE !FILE_EXISTS_IN_GAME ~dvimhere.mrk~ @3352
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#blades END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=~blade_barrier~ END

/////////////////////////////////////////////////////////////////////////
/// Cap Skull Trap damage at 12d6
/////////////////////////////////////////////////////////////////////////

BEGIN @21 DESIGNATED 2080 GROUP @2
REQUIRE_PREDICATE !FILE_EXISTS_IN_GAME ~dvimhere.mrk~ @3352
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#skulltrap END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=~skull_trap~ END

/////////////////////////////////////////////////////////////////////////
///	Make Power Word: Blind single-target
/////////////////////////////////////////////////////////////////////////

BEGIN @23  DESIGNATED 2090 GROUP @2
REQUIRE_PREDICATE !FILE_EXISTS_IN_GAME ~dvimhere.mrk~ @3352
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#PWblind END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=~power_word_blind~ END

/////////////////////////////////////////////////////////////////////////
/// Make Melfs +2
/////////////////////////////////////////////////////////////////////////

BEGIN @22 DESIGNATED 2100 GROUP @2
REQUIRE_PREDICATE !FILE_EXISTS_IN_GAME ~dvimhere.mrk~ @3352
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#meteor END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=~meteors~ END

//////////////////////////////////////////////////////////////////////////
///	Nerf Inquisitors
/////////////////////////////////////////////////////////////////////////

BEGIN @170 DESIGNATED 2110  GROUP @2 SUBCOMPONENT @169
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8

LAF make_label STR_VAR label=dw#nerfinquisitor_1-5 END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=~inquisitor~ version=~one_point_five~ END


////////////////////////////////////////////////////

BEGIN @171 DESIGNATED 2111  GROUP @2 SUBCOMPONENT @169
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8

LAF make_label STR_VAR label=dw#nerfinquisitor_2 END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=~inquisitor~ version=~two~ END

//////////////////////////////////////////////////////////////////////////
///     Modify Insect Plague
/////////////////////////////////////////////////////////////////////////

BEGIN @3329 DESIGNATED 2120 GROUP @2
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !FILE_EXISTS ~override/dvimhere.mrk~ @3352

LAF make_label STR_VAR label=dw#insectplague END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=~insect_plague~ END

//////////////////////////////////////////////////////////////////////////
///	Make Stoneskin invisible
/////////////////////////////////////////////////////////////////////////

BEGIN @3351 DESIGNATED 2130 GROUP @2
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE (ENGINE_IS ~tob~ && FILE_EXISTS ~bgmain.exe~) @2000
REQUIRE_PREDICATE !FILE_CONTAINS_EVALUATED (~tobex_ini/ToBExTweak.ini~ ~Disable Stoneskin Grey Colour=1~) @3391

LAF make_label STR_VAR label=dw#stoneskin_invisible END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=~stoneskin_invisible~ END

//////////////////////////////////////////////////////////////////////////
///    Improve mantle et al
/////////////////////////////////////////////////////////////////////////


BEGIN @3353 DESIGNATED 2140 GROUP @2
REQUIRE_PREDICATE !FILE_EXISTS_IN_GAME ~dvimhere.mrk~ @3352
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#mantle  END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=~mantle~ END

//////////////////////////////////////////////////////////////////////////
///   Let enchanters use sequencers
/////////////////////////////////////////////////////////////////////////

BEGIN @3386 DESIGNATED 2150 GROUP @2
REQUIRE_PREDICATE !FILE_EXISTS_IN_GAME ~dvimhere.mrk~ @3352
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8


LAF make_label STR_VAR label=dw#sequencer_universal  END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=~universal_trigger~ END

//////////////////////////////////////////////////////////////////////////
///   Extra scrolls
/////////////////////////////////////////////////////////////////////////

BEGIN @3387 DESIGNATED 2160 GROUP @2
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000


LAF make_label STR_VAR label=dw#extra_scrolls  END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=~bonus_spell_scrolls~ END

//////////////////////////////////////////////////////////////////////////
///   Truesight protects from blindness
/////////////////////////////////////////////////////////////////////////

BEGIN @3392 DESIGNATED 2170 GROUP @2
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#truesight_blindness  END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=~truesight_blindness~ END

//////////////////////////////////////////////////////////////////////////
///   Clones lose items
/////////////////////////////////////////////////////////////////////////

BEGIN @220 DESIGNATED 2180 GROUP @2
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !FILE_EXISTS ~override/dvimhere.mrk~ @3352
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#clone_slots  END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=~clone_slots~ END

//////////////////////////////////////////////////////////////////////////
///   Invisibility hides animations
/////////////////////////////////////////////////////////////////////////

/*
BEGIN @16031 DESIGNATED 2190 GROUP @2 DEPRECATED ~Very nice in theory but I really can't make it work properly~
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8

LAF make_label STR_VAR label=dw#invisibility_animation  END

OUTER_SPRINT component_loc spell
LAF run STR_VAR files=~invisibility_animations~ END
*/

//////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////
/////         ITEMS
//////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////


//////////////////////////////////////////////////////////////////////////
///   Replace elemental arrows
/////////////////////////////////////////////////////////////////////////

BEGIN @16003 DESIGNATED 3000 GROUP @3
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE (GAME_IS ~tutu tutu_totsc bgee~) @16002

LAF make_label STR_VAR label=dw#elemental_arrows  END

OUTER_SPRINT component_loc item
LAF run STR_VAR files=~elemental_arrows~ END

//////////////////////////////////////////////////////////////////////////
///   Replace +1 arrows and other missiles with fine versions
/////////////////////////////////////////////////////////////////////////

BEGIN @16007 DESIGNATED 3010 GROUP @3
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8

LAF make_label STR_VAR label=dw#fine_arrows  END

OUTER_SPRINT component_loc item
LAF run STR_VAR files=~fine_arrows~ END

//////////////////////////////////////////////////////////////////////////
///   Replace magic weapons with fine versions
/////////////////////////////////////////////////////////////////////////

BEGIN @35 DESIGNATED 3020 GROUP @3 // BG2 only

REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~bgt eet tutu tutu_totsc bgee~ @16000
REQUIRE_PREDICATE !(MOD_IS_INSTALLED ~item_rev/item_rev.tp2~ 0) @3376


LAF make_label STR_VAR label=dw#fine_weapons_bg2  END

OUTER_SPRINT component_loc item
LAF run STR_VAR files=~fine_weapons~ END

/////////////////////////////////////////////////////////////////////////

BEGIN @20073 DESIGNATED 3021 GROUP @3 SUBCOMPONENT @36 // no-shatter
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE GAME_IS ~bgt eet tutu tutu_totsc bgee~ @16001
REQUIRE_PREDICATE !(MOD_IS_INSTALLED ~item_rev/item_rev.tp2~ 0) @3376

LAF make_label STR_VAR label=dw#fine_weapons_no_shatter  END

OUTER_SPRINT component_loc item
LAF run STR_VAR files=~fine_weapons~ version=~no_shatter~ END

/////////////////////////////////////////////////////////////////////////

BEGIN @20072 DESIGNATED 3022  GROUP @3 SUBCOMPONENT @36 // shatter

LAF make_label STR_VAR label=dw#fine_weapons_shatter  END

OUTER_SPRINT component_loc item
LAF run STR_VAR files=~fine_weapons~ version=~shatter~ END

//////////////////////////////////////////////////////////////////////////
///   Restore extra-healing potions
/////////////////////////////////////////////////////////////////////////

BEGIN @20008 DESIGNATED 3030 GROUP @3 // BG2 only
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#extra_healing  END

OUTER_SPRINT component_loc item
LAF run STR_VAR files=~extra_healing~ END

//////////////////////////////////////////////////////////////////////////
///   Reduce number of dispelling arrows in stores
/////////////////////////////////////////////////////////////////////////

BEGIN @3325  DESIGNATED 3040 GROUP @3 SUBCOMPONENT  @16005
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8

LAF make_label STR_VAR label=dw#dispel_arrows1 END

OUTER_SPRINT component_loc item
LAF run STR_VAR files=~dispelling_arrows~ version=~none~ END

/////////////////////////////////////////////////////////////////////////

BEGIN @16006 DESIGNATED 3041 GROUP @3 SUBCOMPONENT @16005

LAF make_label STR_VAR label=dw#dispel_arrows2 END

OUTER_SPRINT component_loc item
LAF run STR_VAR files=~dispelling_arrows~ version=~few~ END

///////////////////////////////////////////////////////////////////////
////   Remove Balduran's Shield
////////////////////////////////////////////////////////////////////////

BEGIN @31 DESIGNATED 3050 GROUP @3
REQUIRE_PREDICATE (MOD_IS_INSTALLED ~item_rev/item_rev.tp2~ 0)=0 @3377
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#balduran END

OUTER_SPRINT component_loc item
LAF run STR_VAR files=~balduran_shield~ END

///////////////////////////////////////////////////////////////////////////////////////////
////	Nerf Staff of the Magi
///////////////////////////////////////////////////////////////////////////////////////////

BEGIN @32 DESIGNATED 3060 GROUP @3
REQUIRE_PREDICATE (MOD_IS_INSTALLED ~item_rev/item_rev.tp2~ 0)=0 @3376
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#magistaff END

OUTER_SPRINT component_loc item
LAF run STR_VAR files=~magi_staff~ END

///////////////////////////////////////////////////////////////////////////////////////////
////	Move Vhailor's Helm
///////////////////////////////////////////////////////////////////////////////////////////

BEGIN @33 DESIGNATED 3070 GROUP @3
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE (MOD_IS_INSTALLED ~item_rev/item_rev.tp2~ 0)=0 @3376
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#vhailor END

OUTER_SPRINT component_loc item
LAF run STR_VAR files=~vhailor_helm~ END

///////////////////////////////////////////////////////////////////////////////////////////
////	Move the Cloak of Mirroring
///////////////////////////////////////////////////////////////////////////////////////////

BEGIN @198 DESIGNATED 3080 GROUP @3
REQUIRE_PREDICATE (MOD_IS_INSTALLED ~item_rev/item_rev.tp2~ 0)=0 @3376
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#mirror END

OUTER_SPRINT component_loc item
LAF run STR_VAR files=~mirror_cloak~ END

///////////////////////////////////////////////////////////////////////////////////////////
////	Move the Robe of Vecna
///////////////////////////////////////////////////////////////////////////////////////////

BEGIN @34 DESIGNATED 3090 GROUP @3
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE (MOD_IS_INSTALLED ~item_rev/item_rev.tp2~ 0)=0 @3376
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#vecna END

OUTER_SPRINT component_loc item
LAF run STR_VAR files=~vecna~ END

///////////////////////////////////////////////////////////////////////////////////////////
////	Separate powers of the Rod of Resurrection
///////////////////////////////////////////////////////////////////////////////////////////

BEGIN @3354 DESIGNATED 3100 GROUP @3
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE (MOD_IS_INSTALLED ~item_rev/item_rev.tp2~ 0)=0 @3376
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#resurrectrod END

OUTER_SPRINT component_loc item
LAF run STR_VAR files=~nerf_resurrection_rod~ END

////////////////////////////////////////////////////////////////////////////////
//       Nerf Carsomyr
/////////////////////////////////////////////////////////////////////////////////

BEGIN @3362 DESIGNATED 3110 GROUP @3
REQUIRE_PREDICATE (MOD_IS_INSTALLED ~item_rev/item_rev.tp2~ 0)=0 @3376
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#carsomyr END

OUTER_SPRINT component_loc item
LAF run STR_VAR files=~nerf_carsomyr~ END

//////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////
/////         GAMEPLAY
//////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////


////////////////////////////////////////////////////////////////////////////
//Faster bears
////////////////////////////////////////////////////////////////////////////

BEGIN @166 DESIGNATED 4000 GROUP @4
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS bg2ee @15999

LAF make_label STR_VAR label=dw#fastbears END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=~fast_bears~ END

//////////////////////////////////////////////////////////////////////////
///   Web doesn't affect large/flying/non-solid creatures
/////////////////////////////////////////////////////////////////////////

BEGIN @221 DESIGNATED 4010 GROUP @4
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8

LAF make_label STR_VAR label=dw#web_large END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=~web_and_the_large~ END

////////////////////////////////////////////////////////////////////////////////////////
///    More realistic wolves/dogs
////////////////////////////////////////////////////////////////////////////////////////
BEGIN @24118 DESIGNATED 4020 GROUP @4
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#wolves END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=~realistic_wolves~ END

///////////////////////////////////////////////////////////////////
 //Improved shapeshifting
///////////////////////////////////////////////////////////////////

BEGIN @3333 DESIGNATED 4030 GROUP @4
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8

LAF make_label STR_VAR label=dw#shapeshift END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=~shapeshift~ END

/////////////////////////////////////////////////////////////////////////////////////////
//	Protection from Chunking
//////////////////////////////////////////////////////////////////////////////////////////

BEGIN @164 DESIGNATED 4040 GROUP @4 DEPRECATED @0 // moved to Tweaks Anthology
/*REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8

LAF make_label STR_VAR label=dw#nochunkv2 END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=~no_chunk~ END */

////////////////////////////////////////////////////////////////////////////////////////
////	Slow reputation increase
////////////////////////////////////////////////////////////////////////////////////////

// 2/3 normal rate

BEGIN @3380 DESIGNATED 4050 GROUP @4 SUBCOMPONENT @3379
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8

LAF make_label STR_VAR label=dw#repslow END

OUTER_SPRINT component_loc gameplay
LAF run INT_VAR STR_VAR files=reputation version=two_thirds END

//////////////////////////////////////////////////

// 1/2 normal rate

BEGIN @3381 DESIGNATED 4051 GROUP @4 SUBCOMPONENT @3379

LAF make_label STR_VAR label=dw#repslow END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=reputation version=one_half END

//////////////////////////////////////////////////

// 1/3 normal rate

BEGIN @3382 DESIGNATED 4052 GROUP @4 SUBCOMPONENT @3379

LAF make_label STR_VAR label=dw#repslow END

OUTER_SPRINT component_loc gameplay
LAF run INT_VAR STR_VAR files=reputation version=one_third END

//////////////////////////////////////////////////

// 1/4 normal rate

BEGIN @3383  DESIGNATED 4093 GROUP @4 SUBCOMPONENT @3379

LAF make_label STR_VAR label=dw#repslow END

OUTER_SPRINT component_loc gameplay
LAF run INT_VAR  STR_VAR files=reputation version=one_fourth END

//////////////////////////////////////////////////////////////////////////
///   Player chooses NPC skills
/////////////////////////////////////////////////////////////////////////

BEGIN @20010 DESIGNATED 4100 GROUP @4
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001
REQUIRE_PREDICATE !GAME_IS ~bgee eet~ ~This component isn't quite ready for BG:EE or EET yet~

LAF make_label STR_VAR label=dw#npc_profs END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=~npc_proficiencies~ END

/////////////////////////////////////////////////////////////////////////////
// Allow NPC pairs to separate
/////////////////////////////////////////////////////////////////////////////

BEGIN @20011 DESIGNATED 4110 GROUP @4 DEPRECATED @0 // moved to Tweaks Anthology
/*REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#npc_profs END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=~npc_separate~ END*/


//////////////////////////////////////////////////////////////////////////////
// NPCs go to inns
//////////////////////////////////////////////////////////////////////////////
BEGIN @20012 DESIGNATED 4120 GROUP @4 DEPRECATED @0 // moved to Tweaks Anthology
/*REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !FILE_EXISTS ~override/X#WaitAtInn.G3~ @20066
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#npc_profs END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=~wait_at_inns~ END */

///////////////////////////////////////////////////////////////////
//Move NPCs to more convenient locations
///////////////////////////////////////////////////////////////////
BEGIN @20016 DESIGNATED 4130 GROUP @4 DEPRECATED @0 // moved to Tweaks Anthology
/*REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001


LAF make_label STR_VAR label=dw#npc_start_loc END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=~move_npcs~ END*/

//////////////////////////////////////////////////////////////////////////
///   Yeslick can use axes
/////////////////////////////////////////////////////////////////////////

BEGIN @20014 DESIGNATED 4140 GROUP @4 DEPRECATED @0 // moved to Tweaks Anthology
/*REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#yeslick_axe END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=~yeslick_axes~ END*/

//////////////////////////////////////////////////////////////////////////////////////
//Skip Candlekeep
//////////////////////////////////////////////////////////////////////////////////////

BEGIN @16029 DESIGNATED 4145  GROUP @4  SUBCOMPONENT  @16028
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#candleskip END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=skip_candlekeep version=notutors END

//////////////////////////////////////////////////////////////////////////////////////

BEGIN @16030 DESIGNATED 4146  GROUP @4  SUBCOMPONENT  @16028

LAF make_label STR_VAR label=dw#candleskip END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=skip_candlekeep version=classic END


//////////////////////////////////////////
///// Extend area requiring a mage license
//////////////////////////////////////////////

BEGIN @3372 DESIGNATED 4150 GROUP @4
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#licenseextension END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=license_range END

//////////////////////////////////////////
///// Higher cost for a mage license
//////////////////////////////////////////////

BEGIN @3367  DESIGNATED 4160 GROUP @4 SUBCOMPONENT @3366
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#licensecost END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=license_cost version=10 END

///////////////////////////////////////////////////////////////////////////////////////////

BEGIN @3368 DESIGNATED 4161  GROUP @4 SUBCOMPONENT @3366

LAF make_label STR_VAR label=dw#licensecost END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=license_cost version=15 END

///////////////////////////////////////////////////////////////////////////////////////////

BEGIN @3369 DESIGNATED 4162 GROUP @4 SUBCOMPONENT @3366
/// --- /// DEFAULT_CHOICE

LAF make_label STR_VAR label=dw#licensecost END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=license_cost version=20 END

///////////////////////////////////////////////////////////////////////////////////////////

BEGIN @3370 DESIGNATED 4163 GROUP @4 SUBCOMPONENT @3366

LAF make_label STR_VAR label=dw#licensecost END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=license_cost version=30 END

///////////////////////////////////////////////////////////////////////////////////////////

BEGIN @3371 DESIGNATED 4164 GROUP @4 SUBCOMPONENT @3366

LAF make_label STR_VAR label=dw#licensecost END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=license_cost version=50 END

//////////////////////////////////////////
///// Higher cost to get to Spellhold
//////////////////////////////////////////////

BEGIN @42 DESIGNATED 4170 GROUP @4 SUBCOMPONENT @41
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000
LAF make_label STR_VAR label=dw#spellholdcost END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=spellhold_cost version=40 END

///////////////////////////////////////////////////////////////////////////////////////////
BEGIN @43 DESIGNATED 4171  GROUP @4 SUBCOMPONENT @41

LAF make_label STR_VAR label=dw#spellholdcost END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=spellhold_cost version=60 END

///////////////////////////////////////////////////////////////////////////////////////////
BEGIN @44 DESIGNATED 4172 GROUP @4 SUBCOMPONENT @41

LAF make_label STR_VAR label=dw#spellholdcost END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=spellhold_cost version=80 END

///////////////////////////////////////////////////////////////////////////////////////////
BEGIN @45 DESIGNATED 4173 GROUP @4 SUBCOMPONENT @41
/// --- /// DEFAULT_CHOICE

LAF make_label STR_VAR label=dw#spellholdcost END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=spellhold_cost version=100 END

///////////////////////////////////////////////////////////////////////////////////////////
BEGIN @46 DESIGNATED 4174 GROUP @4 SUBCOMPONENT @41
LAF make_label STR_VAR label=dw#spellholdcost END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=spellhold_cost version=120 END

//////////////////////////////////////////////////////////////////////////////////////////
/// Make Freedom scrolls available earlier
//////////////////////////////////////////////////////////////////////////////////////////

BEGIN @196 DESIGNATED 4180 GROUP @4
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#freedomscroll END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=freedom_scrolls END

//////////////////////////////////////////////////////////////////////////////////////////
/// Early access to Watchers' Keep
//////////////////////////////////////////////////////////////////////////////////////////

BEGIN @49 DESIGNATED 4190 GROUP @4

REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000
REQUIRE_PREDICATE !GAME_IS ~bg2ee eet~ @15999
REQUIRE_PREDICATE !FILE_EXISTS_IN_GAME ~dw#hellloot.mrk~ @219

LAF make_label STR_VAR label=dw#wkearly END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=wk_early END

////////////////////////////////////////////////////////////
////	Loot from Hell moves
////////////////////////////////////////////////////////////


BEGIN @193 DESIGNATED 4200 GROUP @4
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000
REQUIRE_PREDICATE !GAME_IS ~bg2ee eet~ @15999

LAF make_label STR_VAR label=dw#hellloot END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=move_hell_items END

/////////////////////////////////////////////////////////////////////////////////////////
//	Randomise teleport maze
//////////////////////////////////////////////////////////////////////////////////////////

BEGIN @3365 DESIGNATED 4210 GROUP @4
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#maze END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=teleport_maze END

/////////////////////////////////////////////////////////////////////////////////////////
//	No-chimp
//////////////////////////////////////////////////////////////////////////////////////////

BEGIN @47 DESIGNATED 4215 GROUP @4
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000
LAF make_label STR_VAR label=dw#nochimp END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=no_chimp END

/////////////////////////////////////////////////////////////////////////////////////////
//	No-ammo
//////////////////////////////////////////////////////////////////////////////////////////

BEGIN @3321 DESIGNATED 4216 SUBCOMPONENT @48 GROUP @4
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#noammo END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=no_ammo version=0 END

//////////////////

BEGIN @3322 DESIGNATED 4217 SUBCOMPONENT @48 GROUP @4

LAF make_label STR_VAR label=dw#noammo END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=no_ammo version=1 END

//////////////////

BEGIN @3323 DESIGNATED 4218 SUBCOMPONENT @48 GROUP @4

LAF make_label STR_VAR label=dw#noammo END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=no_ammo version=2 END




////////////////////////////////////////////////////////////////////////////////////////
////	Delay bonus merchants
////////////////////////////////////////////////////////////////////////////////////////

BEGIN @3373 DESIGNATED 4230 GROUP @4
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#bonus END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=bonus_merchant END

////////////////////////////////////////////////////////////////////////////////////////
////	HLAs as innate
////////////////////////////////////////////////////////////////////////////////////////

BEGIN @3397 DESIGNATED 4240 GROUP @4
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#hla_innate END

OUTER_SPRINT component_loc gameplay
LAF run STR_VAR files=hla_innate END

/////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////
///	COSMETIC AND EASE-OF-USE TWEAKS
/////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

////////////////////////////////////////////////////////////////////////////////////////
////	ease-of-use AI
////////////////////////////////////////////////////////////////////////////////////////

BEGIN @7 DESIGNATED 5000 GROUP @5
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8

LAF make_label STR_VAR label=dw#easeofuse END

OUTER_SPRINT component_loc ease
LAF run STR_VAR files=ease_of_use_ai END

////////////////////////////////////////////////////////////////////////////////////////
////	move Boo
////////////////////////////////////////////////////////////////////////////////////////

BEGIN @51 DESIGNATED 5010 GROUP @5 DEPRECATED @0 // moved to Tweaks Anthology
/*REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8

LAF make_label STR_VAR label=dw#moveboo END

OUTER_SPRINT component_loc ease
LAF run STR_VAR files=move_boo END*/

//////////////////////////////////////////////////////////////////////////////////////////////
//remove blur effect from displacer cloak
//////////////////////////////////////////////////////////////////////////////////////////////

BEGIN @3356 DESIGNATED 5020 GROUP @5
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8

LAF make_label STR_VAR label=dw#displacer END

OUTER_SPRINT component_loc ease
LAF run STR_VAR files=displacer_cloak END

///////////////////////////////////////////////////////////////////////////////
// Remove sphere effect from cloak of mirroring
///////////////////////////////////////////////////////////////////////////////

BEGIN @50 DESIGNATED 5030 GROUP @5
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#mirrorcloak END

OUTER_SPRINT component_loc ease
LAF run STR_VAR files=mirror_cloak END



//////////////////////////////////////////////////////////////////////////
//Stackable ankheg shells, winterwolf pelts and wyvern heads
//////////////////////////////////////////////////////////////////////////

BEGIN @20007 DESIGNATED 5050  GROUP @5 DEPRECATED @0 // moved to Tweaks Anthology
/*REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#ankhegstack END

OUTER_SPRINT component_loc ease
LAF run STR_VAR files=ankheg_shells END*/

/////////////////////////////////////////////////////////////////////////////////////////
//Protect Shar-Teel
/////////////////////////////////////////////////////////////////////////////////////////

BEGIN @20071 DESIGNATED 5060  GROUP @5 DEPRECATED @0 // moved to Tweaks Anthology
/*/// --- /// DEFAULT_SKIP
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#protectshar END

OUTER_SPRINT component_loc ease
LAF run STR_VAR files=protect_sharteel END*/

/////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////
///	AI enhancements
/////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
//AI setup
//////////////////////////////////////////////////////////////////////////////////

BEGIN @16024 DESIGNATED 5900 GROUP @6
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8

LAF make_label STR_VAR label=dw#AIsetup END

OUTER_SPRINT component_loc caster_shared
LAF run STR_VAR files=initialise END

///////////////////////////////////////////////////////////////////////////////
//Improved General AI
//////////////////////////////////////////////////////////////////////////////////

BEGIN @61 DESIGNATED 6000 GROUP @6
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025

LAF make_label STR_VAR label=dw#genai END

OUTER_SPRINT component_loc genai
LAF run STR_VAR files=genai END

///////////////////////////////////////////////////////////////////////////////
//Better Calls for Help
//////////////////////////////////////////////////////////////////////////////////

BEGIN @62 DESIGNATED 6010 GROUP @6
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025

LAF make_label STR_VAR label=dw#help END

OUTER_SPRINT component_loc help
LAF run STR_VAR files=help END


///////////////////////////////////////////////////////////////////////////////
//HLAs for spellcasters
//////////////////////////////////////////////////////////////////////////////////

BEGIN @89 DESIGNATED 6020 GROUP @6 SUBCOMPONENT @88
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#genai.mrk~ @3350
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000


LAF make_label STR_VAR label=dw#hla END

OUTER_SPRINT component_loc caster_shared
LAF run STR_VAR files=hla version=1 END

//////////////////////////////////////////////////////////////////////////////////

BEGIN @90 DESIGNATED 6021 GROUP @6 SUBCOMPONENT @88

LAF make_label STR_VAR label=dw#hla END

OUTER_SPRINT component_loc caster_shared
LAF run STR_VAR files=hla version=2 END

//////////////////////////////////////////////////////////////////////////////////

BEGIN @91 DESIGNATED 6022 GROUP @6 SUBCOMPONENT @88


LAF make_label STR_VAR label=dw#hla END

OUTER_SPRINT component_loc caster_shared
LAF run STR_VAR files=hla version=3 END

//////////////////////////////////////////////////////////////////////////////////

BEGIN @92 DESIGNATED 6023 GROUP @6 SUBCOMPONENT @88


LAF make_label STR_VAR label=dw#hla END

OUTER_SPRINT component_loc caster_shared
LAF run STR_VAR files=hla version=4 END

//////////////////////////////////////////////////////////////////////////////////

BEGIN @93 DESIGNATED 6024 GROUP @6 SUBCOMPONENT @88

LAF make_label STR_VAR label=dw#hla END

OUTER_SPRINT component_loc caster_shared
LAF run STR_VAR files=hla version=5 END

///////////////////////////////////////////////////////////////////////////////
//Smarter Mages
//////////////////////////////////////////////////////////////////////////////////

BEGIN @81 DESIGNATED 6030 GROUP @6 SUBCOMPONENT @80
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#genai.mrk~ @3350

LAF make_label STR_VAR label=dw#mage END

OUTER_SPRINT component_loc mage
LAF run STR_VAR files=mage version=1 END

//////////////////////////////////////////////////////////////////////////////////

BEGIN @82 DESIGNATED 6031 GROUP @6 SUBCOMPONENT @80

LAF make_label STR_VAR label=dw#mage END

OUTER_SPRINT component_loc mage
LAF run STR_VAR files=mage version=2 END

//////////////////////////////////////////////////////////////////////////////////

BEGIN @83 DESIGNATED 6032 GROUP @6 SUBCOMPONENT @80

LAF make_label STR_VAR label=dw#mage END

OUTER_SPRINT component_loc mage
LAF run STR_VAR files=mage version=3 END

//////////////////////////////////////////////////////////////////////////////////

BEGIN @16013 DESIGNATED 6033 GROUP @6 SUBCOMPONENT @80

LAF make_label STR_VAR label=dw#mage END

OUTER_SPRINT component_loc mage
LAF run STR_VAR files=mage version=4 END

//////////////////////////////////////////////////////////////////////////////////

BEGIN @16015 DESIGNATED 6034 GROUP @6 SUBCOMPONENT @80
LAF make_label STR_VAR label=dw#mage END

OUTER_SPRINT component_loc mage
LAF run STR_VAR files=mage version=5 END


///////////////////////////////////////////////////////////////////////////////
//Smarter Priests
//////////////////////////////////////////////////////////////////////////////////

BEGIN @85 DESIGNATED 6040 GROUP @6 SUBCOMPONENT @84
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#genai.mrk~ @3350

LAF make_label STR_VAR label=dw#priest END

OUTER_SPRINT component_loc priest
LAF run STR_VAR files=priest version=1 END

//////////////////////////////////////////////////////////////////////////////////

BEGIN @86 DESIGNATED 6041 GROUP @6 SUBCOMPONENT @84

LAF make_label STR_VAR label=dw#priest END

OUTER_SPRINT component_loc priest
LAF run STR_VAR files=priest version=2 END

//////////////////////////////////////////////////////////////////////////////////

BEGIN @87 DESIGNATED 6042 GROUP @6 SUBCOMPONENT @84

LAF make_label STR_VAR label=dw#priest END

OUTER_SPRINT component_loc priest
LAF run STR_VAR files=priest version=3 END

//////////////////////////////////////////////////////////////////////////////////

BEGIN @16014 DESIGNATED 6043 GROUP @6 SUBCOMPONENT @84

LAF make_label STR_VAR label=dw#priest END

OUTER_SPRINT component_loc priest
LAF run STR_VAR files=priest version=4 END

//////////////////////////////////////////////////////////////////////////////////

BEGIN @16016 DESIGNATED 6044 GROUP @6 SUBCOMPONENT @84

LAF make_label STR_VAR label=dw#priest END

OUTER_SPRINT component_loc priest
LAF run STR_VAR files=priest version=5 END



///////////////////////////////////////////////////////////////////////////////
//Potions for NPCs
//////////////////////////////////////////////////////////////////////////////////

BEGIN @3344 DESIGNATED 6100 GROUP @6 SUBCOMPONENT @159
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#genai.mrk~ @3350

LAF make_label STR_VAR label=dw#potion END

OUTER_SPRINT component_loc potion
LAF run STR_VAR files=potion version=0 END

//////////////////////////////////////////////////////////////////////////////////

BEGIN @3345 DESIGNATED 6101 GROUP @6 SUBCOMPONENT @159
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#genai.mrk~ @3350

LAF make_label STR_VAR label=dw#potion END

OUTER_SPRINT component_loc potion
LAF run STR_VAR files=potion version=2 END

//////////////////////////////////////////////////////////////////////////////////

BEGIN @3346 DESIGNATED 6102 GROUP @6 SUBCOMPONENT @159
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#genai.mrk~ @3350

LAF make_label STR_VAR label=dw#potion END

OUTER_SPRINT component_loc potion
LAF run STR_VAR files=potion version=3 END

//////////////////////////////////////////////////////////////////////////////////

BEGIN @3347 DESIGNATED 6103 GROUP @6 SUBCOMPONENT @159
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#genai.mrk~ @3350

LAF make_label STR_VAR label=dw#potion END

OUTER_SPRINT component_loc potion
LAF run STR_VAR files=potion version=4 END

//////////////////////////////////////////////////////////////////////////////////

BEGIN @3349  DESIGNATED 6104 GROUP @6 SUBCOMPONENT @159
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#genai.mrk~ @3350

LAF make_label STR_VAR label=dw#potion END

OUTER_SPRINT component_loc potion
LAF run STR_VAR files=potion version=6 END

///////////////////////////////////////////////////////////////////////////////
// Spiders
//////////////////////////////////////////////////////////////////////////////////

BEGIN @160 DESIGNATED 6200 GROUP @6
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025

LAF make_label STR_VAR label=dw#spider END

OUTER_SPRINT component_loc ai
LAF run STR_VAR files=spider END


///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
// BG1-specific
//////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
///  Smarter dryads and sirines
///////////////////////////////////////////////////////////////////////////////

BEGIN @20028 DESIGNATED 6300 GROUP @6
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#genai.mrk~ @3350
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#dryad END

OUTER_SPRINT component_loc ai
LAF run STR_VAR files=sirine_dryad END

///////////////////////////////////////////////////////////////////////////////
///  Marginally less dumb carrion crawlers
///////////////////////////////////////////////////////////////////////////////

BEGIN @20029 DESIGNATED 6310 GROUP @6
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#genai.mrk~ @3350
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#carrion END

OUTER_SPRINT component_loc ai
LAF run STR_VAR files=crawler END

///////////////////////////////////////////////////////////////////////////////
///  Smarter basilisks
///////////////////////////////////////////////////////////////////////////////

BEGIN @20030 DESIGNATED 6320 GROUP @6
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#genai.mrk~ @3350
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#basilisk END

OUTER_SPRINT component_loc ai
LAF run STR_VAR files=basilisk END


///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
// BG2-specific
//////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
///  "Smarter" Golems
///////////////////////////////////////////////////////////////////////////////

BEGIN @3374 DESIGNATED 6500 GROUP @6
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#genai.mrk~ @3350
REQUIRE_PREDICATE !(GAME_IS ~tutu tutu_totsc bgee~) @16000

LAF make_label STR_VAR label=dw#golem END

OUTER_SPRINT component_loc ai
LAF run STR_VAR files=golem END


///////////////////////////////////////////////////////////////////////////////
///  Improved Fiends
///////////////////////////////////////////////////////////////////////////////

BEGIN @16032 DESIGNATED 6510 GROUP @6 SUBCOMPONENT @63
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#fiend END

OUTER_SPRINT component_loc fiend
LAF run STR_VAR files=fiend version=1 END

///////////////////////////////////////////////////////////////////////////////

BEGIN @16033 DESIGNATED 6511 GROUP @6 SUBCOMPONENT @63

LAF make_label STR_VAR label=dw#fiend END

OUTER_SPRINT component_loc fiend
LAF run STR_VAR files=fiend version=2 END

///////////////////////////////////////////////////////////////////////////////
///  Smarter Genies
///////////////////////////////////////////////////////////////////////////////

BEGIN @16051 DESIGNATED 6520 GROUP @6 SUBCOMPONENT @69
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#genie END

OUTER_SPRINT component_loc genie
LAF run STR_VAR files=genie version=1 END

///////////////////////////////////////////////////////////////////////////////

BEGIN @16052 DESIGNATED 6521 GROUP @6 SUBCOMPONENT @69
LAF make_label STR_VAR label=dw#genie END

OUTER_SPRINT component_loc genie
LAF run STR_VAR files=genie version=2 END


////////////////////////////////////////////////////////////////////////


///////////////////////////////////////////////////////////////////////////////
///  Smarter Celestials
///////////////////////////////////////////////////////////////////////////////

BEGIN @16034 DESIGNATED 6530 GROUP @6 SUBCOMPONENT @66
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#celestial END

OUTER_SPRINT component_loc celestial
LAF run STR_VAR files=celestial version=1 END

///////////////////////////////////////////////////////////////////////////////

BEGIN @16035 DESIGNATED 6531 GROUP @6 SUBCOMPONENT @66

LAF make_label STR_VAR label=dw#celestial END

OUTER_SPRINT component_loc celestial
LAF run STR_VAR files=celestial version=2 END

///////////////////////////////////////////////////////////////////////////////
///  Smarter Dragons
///////////////////////////////////////////////////////////////////////////////

BEGIN @16036 DESIGNATED 6540 GROUP @6 SUBCOMPONENT @72
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#dragon END

OUTER_SPRINT component_loc dragon
LAF run STR_VAR files=dragon version=1 END

///////////////////////////////////////////////////////////////////////////////

BEGIN @16037 DESIGNATED 6541 GROUP @6 SUBCOMPONENT @72

LAF make_label STR_VAR label=dw#dragon END

OUTER_SPRINT component_loc dragon
LAF run STR_VAR files=dragon version=2 END

///////////////////////////////////////////////////////////////////////////////
///  Smarter Beholders
///////////////////////////////////////////////////////////////////////////////

BEGIN @3304 DESIGNATED 6550 GROUP @6 SUBCOMPONENT @75
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#beholder END

OUTER_SPRINT component_loc beholder
LAF run STR_VAR files=beholder version=1 END

///////////////////////////////////////////////////////////////////////////////

BEGIN @3305 DESIGNATED 6551 GROUP @6 SUBCOMPONENT @75
LAF make_label STR_VAR label=dw#beholder END

OUTER_SPRINT component_loc beholder
LAF run STR_VAR files=beholder version=2 END

///////////////////////////////////////////////////////////////////////////////

BEGIN @3388 DESIGNATED 6552 GROUP @6 SUBCOMPONENT @75
LAF make_label STR_VAR label=dw#beholder END

OUTER_SPRINT component_loc beholder
LAF run STR_VAR files=beholder version=3 END

///////////////////////////////////////////////////////////////////////////////

BEGIN @3389 DESIGNATED 6553 GROUP @6 SUBCOMPONENT @75
LAF make_label STR_VAR label=dw#beholder END

OUTER_SPRINT component_loc beholder
LAF run STR_VAR files=beholder version=4 END

///////////////////////////////////////////////////////////////////////////////
///  Smarter Illithids
///////////////////////////////////////////////////////////////////////////////

BEGIN @175 DESIGNATED 6560 GROUP @6 SUBCOMPONENT @78  // inv-by-script
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#flayer END

OUTER_SPRINT component_loc psionic
LAF run STR_VAR files=illithid version=1 END

///////////////////////////////////////////////////////////////////////////////

BEGIN @177 DESIGNATED 6561 GROUP @6 SUBCOMPONENT @78 // inv-by-script, increased DR
LAF make_label STR_VAR label=dw#flayer END

OUTER_SPRINT component_loc psionic
LAF run STR_VAR files=illithid version=2 END

///////////////////////////////////////////////////////////////////////////////

BEGIN @174 DESIGNATED 6562 GROUP @6 SUBCOMPONENT @78 // vanilla

LAF make_label STR_VAR label=dw#flayer END

OUTER_SPRINT component_loc psionic
LAF run STR_VAR files=illithid version=3 END

///////////////////////////////////////////////////////////////////////////////

BEGIN @176 DESIGNATED 6563 GROUP @6 SUBCOMPONENT @78 // no inv-by-script, increased DR

LAF make_label STR_VAR label=dw#flayer END

OUTER_SPRINT component_loc psionic
LAF run STR_VAR files=illithid version=4 END

///////////////////////////////////////////////////////////////////////////////////////////
///	GITHYANKI
//////////////////////////////////////////////////////////////////////////////////////////

BEGIN @151 DESIGNATED 6570 GROUP @6
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#genai.mrk~ @3350
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#githyanki END

OUTER_SPRINT component_loc psionic
LAF run STR_VAR file=gith END

///////////////////////////////////////////////////////////////////////////////////////////
///	VAMPIRES
//////////////////////////////////////////////////////////////////////////////////////////

BEGIN @187 DESIGNATED 6580 GROUP @6
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#vampire END

OUTER_SPRINT component_loc vampire
LAF run STR_VAR file=vampire END


///////////////////////////////////////////////////////////////////////////////
///// MELISSAN
///////////////////////////////////////////////////////////////////////////////

BEGIN @3209 DESIGNATED 6590 GROUP @6
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#melissan END

OUTER_SPRINT component_loc melissan
LAF run STR_VAR file=melissan END

/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////
//////     ASCENSION-ONLY COMPONENTS
/////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////



/////////////////////////////////////////////////////////////////////////////////////
//////     Smarter Illasera
/////////////////////////////////////////////////////////////////////////////////////

BEGIN @3306 DESIGNATED 6800 GROUP @6
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000
REQUIRE_PREDICATE FILE_EXISTS_IN_GAME ~illas01.itm~ @3309


LAF make_label STR_VAR label=dw#ascension_illasera END

OUTER_SPRINT component_loc ascension
LAF run STR_VAR file=illasera END

/////////////////////////////////////////////////////////////////////////////////////
//////     Smarter Gromnir
/////////////////////////////////////////////////////////////////////////////////////

BEGIN @3312 DESIGNATED 6810 GROUP @6
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000
REQUIRE_PREDICATE (FILE_EXISTS_IN_GAME ~jumjum.bcs~ || FILE_EXISTS_IN_GAME ~fingrom.cre~) @3313


LAF make_label STR_VAR label=dw#ascension_gromnir END

OUTER_SPRINT component_loc ascension
LAF run STR_VAR file=gromnir END


/////////////////////////////////////////////////////////////////////////////////////
//////     Smarter Yaga-Shura
/////////////////////////////////////////////////////////////////////////////////////

BEGIN @3307 DESIGNATED 6820 GROUP @6
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000
REQUIRE_PREDICATE (FILE_EXISTS_IN_GAME ~yagaft.bcs~ || FILE_EXISTS_IN_GAME finyaga.cre) @3310


LAF make_label STR_VAR label=dw#ascension_yagashura END

OUTER_SPRINT component_loc ascension
LAF run STR_VAR file=yagashura END

/////////////////////////////////////////////////////////////////////////////////////
//////     Smarter Abazigal
/////////////////////////////////////////////////////////////////////////////////////

BEGIN @3308 DESIGNATED 6830 GROUP @6
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000
REQUIRE_PREDICATE (FILE_EXISTS_IN_GAME ~abazdg02.cre~ || FILE_EXISTS_IN_GAME ~finabaz.cre~) @3314


LAF make_label STR_VAR label=dw#ascension_abazigal END

OUTER_SPRINT component_loc ascension
LAF run STR_VAR file=abazigal END

/////////////////////////////////////////////////////////////////////////////////////
//////     Smarter Ascension Irenicus/Sendai
/////////////////////////////////////////////////////////////////////////////////////

BEGIN @3324 DESIGNATED 6840 GROUP @6
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000
REQUIRE_PREDICATE FILE_EXISTS_IN_GAME ~fingrom.cre~ @3314
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#mage.mrk~ @16046


LAF make_label STR_VAR label=dw#ascension_sendai_irenicus END

OUTER_SPRINT component_loc ascension
LAF run STR_VAR file=sendai_irenicus END

/////////////////////////////////////////////////////////////////////////////////////
//////     Ascension fiends get SCSII scripting
/////////////////////////////////////////////////////////////////////////////////////

BEGIN @3315 DESIGNATED 6850 GROUP @6
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000
REQUIRE_PREDICATE FILE_EXISTS_IN_GAME ~fingrom.cre~ @3314


LAF make_label STR_VAR label=dw#ascension_fiends END

OUTER_SPRINT component_loc ascension
LAF run STR_VAR file=ascension_fiends END


///////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////
// TACTICAL CHALLENGES  - BG1
//////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
///  Doppelgangers
///////////////////////////////////////////////////////////////////////////////

BEGIN @20031 DESIGNATED 7000 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#doppelganger END

OUTER_SPRINT component_loc tactical_bg1
LAF run STR_VAR file=doppelganger END

///////////////////////////////////////////////////////////////////////////////
///  Black Talons
///////////////////////////////////////////////////////////////////////////////

BEGIN @20033 DESIGNATED 7010 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#blacktalon END

OUTER_SPRINT component_loc tactical_bg1
LAF run STR_VAR file=blacktalon END

///////////////////////////////////////////////////////////////////////////////
///  Random assassins
///////////////////////////////////////////////////////////////////////////////

BEGIN @20070 DESIGNATED 7020 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#c3assassin END

OUTER_SPRINT component_loc tactical_bg1
LAF run STR_VAR file=c3assassin END

///////////////////////////////////////////////////////////////////////////////
///  Kobolds
///////////////////////////////////////////////////////////////////////////////

BEGIN @20027 DESIGNATED 7030 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#kobold END

OUTER_SPRINT component_loc kobold
LAF run STR_VAR file=kobold END

///////////////////////////////////////////////////////////////////////////////
///  Ogre assassins
///////////////////////////////////////////////////////////////////////////////

BEGIN @20034 DESIGNATED 7040 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#ogreassassin END

OUTER_SPRINT component_loc tactical_bg1
LAF run STR_VAR file=ogreassassin END

///////////////////////////////////////////////////////////////////////////////
///  Ulcaster
///////////////////////////////////////////////////////////////////////////////

BEGIN @20035 DESIGNATED 7050 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#ulcaster END

OUTER_SPRINT component_loc ulcaster
LAF run STR_VAR file=ulcaster END

///////////////////////////////////////////////////////////////////////////////
///  Werewolf island
///////////////////////////////////////////////////////////////////////////////

BEGIN @20036 DESIGNATED 7060 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#werewolf END

OUTER_SPRINT component_loc werewolf
LAF run STR_VAR file=werewolf END

///////////////////////////////////////////////////////////////////////////////
///  Durlag's Tower
///////////////////////////////////////////////////////////////////////////////

BEGIN @20037 DESIGNATED 7070 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#durlag END

OUTER_SPRINT component_loc durlag
LAF run STR_VAR file=durlag END

///////////////////////////////////////////////////////////////////////////////
///  Demon cult
///////////////////////////////////////////////////////////////////////////////

BEGIN @20038 DESIGNATED 7080 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#demoncult END

OUTER_SPRINT component_loc tactical_bg1
LAF run STR_VAR file=demoncult END

///////////////////////////////////////////////////////////////////////////////
///  Druids
///////////////////////////////////////////////////////////////////////////////

BEGIN @20089 DESIGNATED 7090 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#priest.mrk~ @16047
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#druid END

OUTER_SPRINT component_loc tactical_bg1
LAF run STR_VAR file=druid END

///////////////////////////////////////////////////////////////////////////////
///  Bassilus
///////////////////////////////////////////////////////////////////////////////

BEGIN @20090 DESIGNATED 7100 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#bassilus END

OUTER_SPRINT component_loc tactical_bg1
LAF run STR_VAR file=bassilus END

///////////////////////////////////////////////////////////////////////////////
///  Drasus
///////////////////////////////////////////////////////////////////////////////

BEGIN @20091 DESIGNATED 7110 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#drasus END

OUTER_SPRINT component_loc tactical_bg1
LAF run STR_VAR file=drasus END

///////////////////////////////////////////////////////////////////////////////
///  Red wizards
///////////////////////////////////////////////////////////////////////////////

BEGIN @20092 DESIGNATED 7130 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#mage.mrk~ @16046
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#redwizard END

OUTER_SPRINT component_loc tactical_bg1
LAF run STR_VAR file=redwizard END

///////////////////////////////////////////////////////////////////////////////
///  Iron Throne in undercity
///////////////////////////////////////////////////////////////////////////////

BEGIN @20093 DESIGNATED 7140 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#c7throne END

OUTER_SPRINT component_loc tactical_bg1
LAF run STR_VAR file=c7throne END

///////////////////////////////////////////////////////////////////////////////
///  Improved C2 end-battle
///////////////////////////////////////////////////////////////////////////////

BEGIN @20042 DESIGNATED 7200 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#c2end END

OUTER_SPRINT component_loc tactical_bg1
LAF run STR_VAR file=c2end END

///////////////////////////////////////////////////////////////////////////////
///  Improved C3 end-battle
///////////////////////////////////////////////////////////////////////////////

BEGIN @20043 DESIGNATED 7210 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#c3end END

OUTER_SPRINT component_loc tactical_bg1
LAF run STR_VAR file=c3end END

///////////////////////////////////////////////////////////////////////////////
///  Improved C4 end-battle
///////////////////////////////////////////////////////////////////////////////

BEGIN @20044 DESIGNATED 7220 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#c4end END

OUTER_SPRINT component_loc tactical_bg1
LAF run STR_VAR file=c4end END

///////////////////////////////////////////////////////////////////////////////
///  Improved C5 end-battle
///////////////////////////////////////////////////////////////////////////////

BEGIN @20045 DESIGNATED 7230 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#c5end END

OUTER_SPRINT component_loc tactical_bg1
LAF run STR_VAR file=c5end END

///////////////////////////////////////////////////////////////////////////////
///  Improved C7 end-battle
///////////////////////////////////////////////////////////////////////////////

BEGIN @20047 DESIGNATED 7250 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#c7end END

OUTER_SPRINT component_loc sarevok
LAF run STR_VAR file=sarevok END

///////////////////////////////////////////////////////////////////////////////
///  BG1 misc
///////////////////////////////////////////////////////////////////////////////

BEGIN @20039 DESIGNATED 7900 GROUP @16040
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE (GAME_IS ~bgt eet tutu tutu_totsc bgee~) @16001

LAF make_label STR_VAR label=dw#bg1minor END

OUTER_SPRINT component_loc tactical_bg1
LAF run STR_VAR file=minor_bg1 END


///////////////////////////////////////////////////////////////////////////////////////
/////	Improved starting dungeon
///////////////////////////////////////////////////////////////////////////////////////

BEGIN @3334 DESIGNATED 8000 GROUP @16041
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#startingdungeon END

OUTER_SPRINT component_loc tactical_bg2
LAF run STR_VAR file=startingdungeon END

///////////////////////////////////////////////////////////////////////////////////////
/////	Improved shade lord
///////////////////////////////////////////////////////////////////////////////////////

BEGIN @172 DESIGNATED 8010 GROUP @16041
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#shadelord END

OUTER_SPRINT component_loc tactical_bg2
LAF run STR_VAR file=shadelord END

///////////////////////////////////////////////////////////////////////////////////////
/////	Spellcasting demiliches
///////////////////////////////////////////////////////////////////////////////////////


BEGIN @192 DESIGNATED 8020 GROUP @16041
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#mage.mrk~ @16046
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#demilich END

OUTER_SPRINT component_loc demilich
LAF run STR_VAR file=demilich END

///////////////////////////////////////////////////////////////////////////////////////
/////	More resilient trolls
///////////////////////////////////////////////////////////////////////////////////////

BEGIN @182 DESIGNATED 8030 GROUP @16041
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#resilienttrolls END

OUTER_SPRINT component_loc tactical_bg2
LAF run STR_VAR file=resilient_trolls END

///////////////////////////////////////////////////////////////////////////////////////
/////	Increased difficulty of random spawns
///////////////////////////////////////////////////////////////////////////////////////

BEGIN @155 DESIGNATED 8040 GROUP @16041 SUBCOMPONENT @154
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#spawns END

OUTER_SPRINT component_loc tactical_bg2
LAF run STR_VAR file=spawn version=1 END

///////////////////////////////////////////////////////////////////////////////////////

BEGIN @156 DESIGNATED 8041 GROUP @16041 SUBCOMPONENT @154

LAF make_label STR_VAR label=dw#spawns END

OUTER_SPRINT component_loc tactical_bg2
LAF run STR_VAR file=spawn version=2 END

///////////////////////////////////////////////////////////////////////////////////////

BEGIN @157 DESIGNATED 8042 GROUP @16041 SUBCOMPONENT @154
LAF make_label STR_VAR label=dw#spawns END

OUTER_SPRINT component_loc tactical_bg2
LAF run STR_VAR file=spawn version=3 END

///////////////////////////////////////////////////////////////////////////////////////

BEGIN @167 DESIGNATED 8043 GROUP @16041 SUBCOMPONENT @154

LAF make_label STR_VAR label=dw#spawns END

OUTER_SPRINT component_loc tactical_bg2
LAF run STR_VAR file=spawn version=4 END

///////////////////////////////////////////////////////////////////////////////////////
///	Improved random encounters
///////////////////////////////////////////////////////////////////////////////////////

BEGIN @191 DESIGNATED 8050 GROUP @16041
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025

REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#random END

OUTER_SPRINT component_loc tactical_bg2
LAF run STR_VAR file=random END

///////////////////////////////////////////////////////////////////////////////////////
/////	Improved d'Arnise keep
///////////////////////////////////////////////////////////////////////////////////////

BEGIN @178 DESIGNATED 8060 GROUP @16041 SUBCOMPONENT @158
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#darnise END

OUTER_SPRINT component_loc tactical_bg2
LAF run STR_VAR file=darnise version=1 END

///////////////////////////////////////////////////////////////////////////////////////

BEGIN @179 DESIGNATED 8061 GROUP @16041 SUBCOMPONENT @158

LAF make_label STR_VAR label=dw#darnise END

OUTER_SPRINT component_loc tactical_bg2
LAF run STR_VAR file=darnise version=2 END

///////////////////////////////////////////////////////////////////////////////////////
/////	Improved Unseeing Eye
///////////////////////////////////////////////////////////////////////////////////////

BEGIN @3398 DESIGNATED 8070 GROUP @16041
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#beholder.mrk~ @3399
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#unseeing END

OUTER_SPRINT component_loc tactical_bg2
LAF run STR_VAR file=unseeingeye  END

///////////////////////////////////////////////////////////////////////////////////////
/////	Improved Bodhi
///////////////////////////////////////////////////////////////////////////////////////

BEGIN @189 DESIGNATED 8080 GROUP @16041 SUBCOMPONENT @188
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#vampire.mrk~ @16049
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#bodhi END

OUTER_SPRINT component_loc bodhi
LAF run STR_VAR file=bodhi version=1 END

///////////////////////////////////////////////////////////////////////////////////////

BEGIN @190 DESIGNATED 8081 GROUP @16041 SUBCOMPONENT @188
LAF make_label STR_VAR label=dw#bodhi END

OUTER_SPRINT component_loc bodhi
LAF run STR_VAR file=bodhi version=2 END

///////////////////////////////////////////////////////////////////////////////////////
/////	Spellhold items are stolen
///////////////////////////////////////////////////////////////////////////////////////

BEGIN @181 DESIGNATED 8090 GROUP @16041
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#spellholditems END

OUTER_SPRINT component_loc spellholditems
LAF run STR_VAR file=spellholditems  END

/////////////////////////////////////////////////////////////////////////////////////
/////	Improved battle with Irenicus in Spellhold
/////////////////////////////////////////////////////////////////////////////////////

BEGIN @3357 DESIGNATED 8100 GROUP @16041
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#spellholdirenicus END

OUTER_SPRINT component_loc tactical_bg2
LAF run STR_VAR file=spellhold_irenicus  END

/////////////////////////////////////////////////////////////////////////////////////
/////	Improved sahuagin
/////////////////////////////////////////////////////////////////////////////////////

BEGIN @194 DESIGNATED 8110 GROUP @16041
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#sahuagin END

OUTER_SPRINT component_loc tactical_bg2
LAF run STR_VAR file=sahuagin  END

/////////////////////////////////////////////////////////////////////////////////////
/////	Improved beholder lair
/////////////////////////////////////////////////////////////////////////////////////

BEGIN @3317 DESIGNATED 8120 GROUP @16041
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#beholderhive END

OUTER_SPRINT component_loc tactical_bg2
LAF run STR_VAR file=beholder_hive  END

/////////////////////////////////////////////////////////////////////////////////////
/////	Block rest in illithid city
/////////////////////////////////////////////////////////////////////////////////////

BEGIN @3318 DESIGNATED 8130 GROUP @16041
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#illithidrest END

OUTER_SPRINT component_loc tactical_bg2
LAF run STR_VAR file=illithid_rest  END

///////////////////////////////////////////////////////////////////////////////////////
/////	Improved drow
///////////////////////////////////////////////////////////////////////////////////////

BEGIN @3319 DESIGNATED 8140 GROUP @16041 SUBCOMPONENT @199
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#drow END

OUTER_SPRINT component_loc drow
LAF run STR_VAR file=drow version=1 END

///////////////////////////////////////////////////////////////////////////////////////

BEGIN @3320 DESIGNATED 8141 GROUP @16041 SUBCOMPONENT @199

LAF make_label STR_VAR label=dw#drow END

OUTER_SPRINT component_loc drow
LAF run STR_VAR file=drow version=2 END

/////////////////////////////////////////////////////////////////////////////////////
/////	Watcher's Keep
/////////////////////////////////////////////////////////////////////////////////////

BEGIN @200 DESIGNATED 8150 GROUP @16041
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#wk END

OUTER_SPRINT component_loc tactical_bg2
LAF run STR_VAR file=watchers_keep  END

/////////////////////////////////////////////////////////////////////////////////////
/////	Fire Giants
/////////////////////////////////////////////////////////////////////////////////////

BEGIN @180 DESIGNATED 8160 GROUP @16041
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#firegiant END

OUTER_SPRINT component_loc firegiant
LAF run STR_VAR file=firegiant  END

/////////////////////////////////////////////////////////////////////////////////////
/////	Sendai's enclave
/////////////////////////////////////////////////////////////////////////////////////

BEGIN @161 DESIGNATED 8170 GROUP @16041
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#sendai END
OUTER_SPRINT component_loc sendai
LAF run STR_VAR file=sendai  END

/////////////////////////////////////////////////////////////////////////////////////
/////   Abazigal's Lair
/////////////////////////////////////////////////////////////////////////////////////

BEGIN @173 DESIGNATED 8180 GROUP @16041
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#abazigal END

OUTER_SPRINT component_loc abazigal
LAF run STR_VAR file=abazigal_enclave  END

/////////////////////////////////////////////////////////////////////////////////////
/////   Catch-all
/////////////////////////////////////////////////////////////////////////////////////

BEGIN @3203 DESIGNATED 8190 GROUP @16041
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#setup.mrk~ @8
REQUIRE_PREDICATE FILE_EXISTS ~override/dw#AIsetup.mrk~ @16025
REQUIRE_PREDICATE !GAME_IS ~tutu tutu_totsc bgee~ @16000

LAF make_label STR_VAR label=dw#bg2minor END

OUTER_SPRINT component_loc tactical_bg2
LAF run STR_VAR file=minor_bg2  END


///---/// BEGIN ~Main installer~ INSTALL_BY_DEFAULT DESIGNATED 10000 NO_LOG_RECORD
///---///
///---/// PRINT ~Press ENTER to install your chosen Sword Coast Stratagems components~
///---/// PRINT ~(This may take a while)~
///---/// ACTION_READLN discard
///---///
///---/// LAF make_weidu_string RET weidustring=weidustring END
///---/// AT_EXIT ~%weidustring%~
